import{_ as o,c as r,a as i,b as e,d as s,e as a,f as l,r as p,o as d}from"./app-LcY0-K8R.js";const u={},m={class:"hint-container tip"},c={class:"hint-container tip"};function g(v,n){const t=p("RouteLink");return d(),r("div",null,[n[56]||(n[56]=i('<h1 id="model-http-api" tabindex="-1"><a class="header-anchor" href="#model-http-api"><span>Model HTTP API</span></a></h1><p>The HTTP API is the main interface for interacting with your data. It is designed to be simple and easy to use. It is also designed to be secure, so you can trust that your data is safe.</p><p>Once you have created your model, you can access it through the HTTP API, by at least 5 methods: <code>POST</code>, <code>GET</code> (single item or item list), <code>PUT</code>, <code>DELETE</code>，which is also referred to as CRUD operations.</p>',3)),e("p",null,[n[1]||(n[1]=s("You should authenticate your requests with a valid JWT token first (see ")),a(t,{to:"/zh/guide/authentication.html"},{default:l(()=>n[0]||(n[0]=[s("Authentication")])),_:1}),n[2]||(n[2]=s(", or the request is defaulted to be ")),n[3]||(n[3]=e("code",null,"PUBLIC",-1)),n[4]||(n[4]=s(" role."))]),n[57]||(n[57]=e("h2",{id:"global-query-parameters",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#global-query-parameters"},[e("span",null,"Global Query Parameters")])],-1)),n[58]||(n[58]=e("p",null,[s("The following parameters are available for most of methods, except "),e("code",null,"POST"),s(", mainly for filtering items:")],-1)),e("table",null,[n[21]||(n[21]=e("thead",null,[e("tr",null,[e("th",null,"Parameter"),e("th",null,"Type"),e("th",null,"Description")])],-1)),e("tbody",null,[n[16]||(n[16]=e("tr",null,[e("td",null,[e("code",null,"id")]),e("td",null,[e("code",null,"number")]),e("td",null,"The ID of the item")],-1)),e("tr",null,[n[10]||(n[10]=e("td",null,[e("code",null,"filter")],-1)),n[11]||(n[11]=e("td",null,[e("code",null,"object")],-1)),e("td",null,[n[6]||(n[6]=s("The ")),a(t,{to:"/zh/guide/HTTPApi.html#filtering"},{default:l(()=>n[5]||(n[5]=[s("filter")])),_:1}),n[7]||(n[7]=s(" object. Bypassed if ")),n[8]||(n[8]=e("code",null,"id",-1)),n[9]||(n[9]=s(" is provided"))])]),n[17]||(n[17]=e("tr",null,[e("td",null,[e("code",null,"orderBy")]),e("td",null,[e("code",null,"string")]),e("td",null,"The field to sort by")],-1)),n[18]||(n[18]=e("tr",null,[e("td",null,[e("code",null,"orderDesc")]),e("td",null,[e("code",null,"bool")]),e("td",null,"Whether to sort in descending order")],-1)),e("tr",null,[n[14]||(n[14]=e("td",null,[e("code",null,"limit")],-1)),n[15]||(n[15]=e("td",null,[e("code",null,"number")],-1)),e("td",null,[n[13]||(n[13]=s("The maximum number of items to return. Defaults to and cannot exceed 100, which is set in ")),a(t,{to:"/zh/developing/globalSettings.html"},{default:l(()=>n[12]||(n[12]=[s("Global Settings")])),_:1})])]),n[19]||(n[19]=e("tr",null,[e("td",null,[e("code",null,"offset")]),e("td",null,[e("code",null,"number")]),e("td",null,"The number of items to skip before returning results")],-1)),n[20]||(n[20]=e("tr",null,[e("td",null,[e("code",null,"page")]),e("td",null,[e("code",null,"number")]),e("td",null,"The 0-based page number to return.")],-1))])]),n[59]||(n[59]=i(`<h3 id="filtering" tabindex="-1"><a class="header-anchor" href="#filtering"><span>Filtering</span></a></h3><p>DYAPI provides a useful filtering system that allows you to filter items by any field.</p><p>This is an example:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;$and&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;$contains&quot;</span><span class="token operator">:</span> <span class="token string">&quot;92&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;$and&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;$start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;$end&quot;</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="logical-operators" tabindex="-1"><a class="header-anchor" href="#logical-operators"><span>Logical Operators</span></a></h4><p>In the outermost layer, you can use <code>$and</code>, <code>$or</code>, <code>$not</code> nested to combine multiple conditions. If you want many <code>$and</code>s (<code>$or</code>s) in the same layer, add number to the end of <code>$and</code>, like <code>$and1</code>,<code>$and2</code>.</p><table><thead><tr><th>Operator</th><th>Description</th></tr></thead><tbody><tr><td>$and</td><td>Logical AND. It returns true only if all the conditions are true.</td></tr><tr><td>$or</td><td>Logical OR. It returns true if any of the conditions is true.</td></tr><tr><td>$not</td><td>Logical NOT. It returns true if the condition is false and vice versa.</td></tr></tbody></table><p>The values of <code>$and</code>, <code>$or</code>, and <code>$not</code> keys are also objects.</p><h4 id="comparison-operators" tabindex="-1"><a class="header-anchor" href="#comparison-operators"><span>Comparison Operators</span></a></h4><p>If the key is a field name, the value can be an object containing the Comparison operators, which will be applied to the field value:</p><table><thead><tr><th style="text-align:left;">Operator</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">$eq</td><td style="text-align:left;">Equal to</td></tr><tr><td style="text-align:left;">$ne</td><td style="text-align:left;">Not equal to</td></tr><tr><td style="text-align:left;">$gt</td><td style="text-align:left;">Greater than</td></tr><tr><td style="text-align:left;">$gte</td><td style="text-align:left;">Greater than or equal to</td></tr><tr><td style="text-align:left;">$lt</td><td style="text-align:left;">Less than</td></tr><tr><td style="text-align:left;">$lte</td><td style="text-align:left;">Less than or equal to</td></tr><tr><td style="text-align:left;">$in</td><td style="text-align:left;">Whether the value is in the array</td></tr><tr><td style="text-align:left;">$nin</td><td style="text-align:left;">Whether the value is not in the array</td></tr><tr><td style="text-align:left;">$start</td><td style="text-align:left;">Whether the value starts with the given string</td></tr><tr><td style="text-align:left;">$end</td><td style="text-align:left;">Whether the value ends with the given string</td></tr><tr><td style="text-align:left;">$contains</td><td style="text-align:left;">Whether the value contains the given string</td></tr><tr><td style="text-align:left;">$regex</td><td style="text-align:left;">Whether the value matches the given regular expression</td></tr></tbody></table><p>The value can also be a simple value, which will be compared with the field value using <code>$eq</code> or <code>$regex</code>.</p><h2 id="creating-an-item" tabindex="-1"><a class="header-anchor" href="#creating-an-item"><span>Creating an Item</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>Creating an item requires current role having <code>C</code> permission on the model.</p></div><p><code>POST /api/&lt;model&gt;</code><strong>Request Body</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token comment">//Success</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">114514</span><span class="token punctuation">,</span><span class="token comment">//The id of the created item. Might be string typed ObjectID or int.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//Failed</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reading-an-item-or-items" tabindex="-1"><a class="header-anchor" href="#reading-an-item-or-items"><span>Reading an Item or Items</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>Reading an item (<strong>Read One</strong>) requires current role having <code>RO</code> or <code>R</code> permission on the model.</p><p>Reading items (<strong>Read List</strong>) requires current role having <code>RL</code> or <code>R</code> permission on the model.</p><p>For each field, it also requires current role having <code>r</code> permission on the field.</p></div><h3 id="read-one" tabindex="-1"><a class="header-anchor" href="#read-one"><span>Read One</span></a></h3><p><code>GET /api/&lt;model&gt;/&lt;id&gt;</code></p><p><strong>Query Parameters</strong>:</p>`,23)),e("ul",null,[n[24]||(n[24]=e("li",null,[e("code",null,"fields"),s(": fields to return")],-1)),n[25]||(n[25]=e("li",null,[e("code",null,"pop"),s(": fields to populate. Which means we will find the related object whose id is the field value in the model named in the field. The result will be presented as the "),e("code",null,"<field>_pop"),s(" property in the result object. "),e("em",null,[s("Needs "),e("code",null,"p"),s(" permission on the field")])],-1)),e("li",null,[a(t,{to:"/zh/guide/HTTPApi.html#global-query-parameters"},{default:l(()=>n[22]||(n[22]=[s("Global Query Parameters")])),_:1}),n[23]||(n[23]=s("."))])]),n[60]||(n[60]=i(`<p><strong>Response</strong>:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// result item</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="read-list" tabindex="-1"><a class="header-anchor" href="#read-list"><span>Read List</span></a></h3><p><code>GET /api/&lt;model&gt;</code><strong>Query Parameters</strong>:</p>`,4)),e("ul",null,[n[28]||(n[28]=e("li",null,[e("code",null,"fields"),s(": fields to return")],-1)),n[29]||(n[29]=e("li",null,[e("code",null,"pop"),s(": fields to populate. Which means we will find the related object whose id is the field value in the model named in the field. The result will be presented as the "),e("code",null,"<field>_pop"),s(" property in the result object. "),e("em",null,[s("Needs "),e("code",null,"p"),s(" permission on the field")])],-1)),e("li",null,[a(t,{to:"/zh/guide/HTTPApi.html#global-query-parameters"},{default:l(()=>n[26]||(n[26]=[s("Global Query Parameters")])),_:1}),n[27]||(n[27]=s("."))])]),n[61]||(n[61]=i(`<p><strong>Response</strong>:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// list of items</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token comment">// total number of items in the **Model**</span></span>
<span class="line">    <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// total number of pages</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="updating-items" tabindex="-1"><a class="header-anchor" href="#updating-items"><span>Updating Items</span></a></h2>`,3)),e("div",m,[n[39]||(n[39]=e("p",{class:"hint-container-title"},"提示",-1)),n[40]||(n[40]=e("p",null,[s("Updating items requires current role having "),e("code",null,"U"),s(" permission on the model. For each field, current role must have "),e("code",null,"w"),s(" permission on the field.")],-1)),e("p",null,[n[31]||(n[31]=s("If ")),n[32]||(n[32]=e("code",null,"multiUpdate",-1)),n[33]||(n[33]=s(" in ")),a(t,{to:"/zh/developing/globalSettings.html"},{default:l(()=>n[30]||(n[30]=[s("Global Settings")])),_:1}),n[34]||(n[34]=s(" is ")),n[35]||(n[35]=e("code",null,"false",-1)),n[36]||(n[36]=s(" (false by default), You can only select an item using ")),n[37]||(n[37]=e("code",null,"id",-1)),n[38]||(n[38]=s(" to ensure only one item is updated."))])]),n[62]||(n[62]=e("p",null,[e("code",null,"PUT /api/<model>/<id>")],-1)),n[63]||(n[63]=e("p",null,[e("code",null,"PUT /api/<model>")],-1)),n[64]||(n[64]=e("p",null,[e("strong",null,"Query Parameters"),s(":")],-1)),e("ul",null,[e("li",null,[a(t,{to:"/zh/guide/HTTPApi.html#global-query-parameters"},{default:l(()=>n[41]||(n[41]=[s("Global Query Parameters")])),_:1}),n[42]||(n[42]=s("."))])]),n[65]||(n[65]=i(`<p><strong>Response</strong>:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;length&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// number of updated items</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="deleting-items" tabindex="-1"><a class="header-anchor" href="#deleting-items"><span>Deleting Items</span></a></h2>`,3)),e("div",c,[n[52]||(n[52]=e("p",{class:"hint-container-title"},"提示",-1)),n[53]||(n[53]=e("p",null,[s("Updating items requires current role having "),e("code",null,"U"),s(" permission on the model.")],-1)),e("p",null,[n[44]||(n[44]=s("If ")),n[45]||(n[45]=e("code",null,"multiDelete",-1)),n[46]||(n[46]=s(" in ")),a(t,{to:"/zh/developing/globalSettings.html"},{default:l(()=>n[43]||(n[43]=[s("Global Settings")])),_:1}),n[47]||(n[47]=s(" is ")),n[48]||(n[48]=e("code",null,"false",-1)),n[49]||(n[49]=s(" (false by default), You can only select an item using ")),n[50]||(n[50]=e("code",null,"id",-1)),n[51]||(n[51]=s(" to ensure only one item is deleted."))])]),n[66]||(n[66]=e("p",null,[e("code",null,"DELETE /api/<model>"),e("code",null,"DELETE /api/<model>/<id>")],-1)),n[67]||(n[67]=e("p",null,[e("strong",null,"Query Parameters"),s(":")],-1)),e("ul",null,[e("li",null,[a(t,{to:"/zh/guide/HTTPApi.html#global-query-parameters"},{default:l(()=>n[54]||(n[54]=[s("Global Query Parameters")])),_:1}),n[55]||(n[55]=s("."))])]),n[68]||(n[68]=i(`<p><strong>Response</strong>:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// No matter what, the code is always 200.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2))])}const h=o(u,[["render",g],["__file","HTTPApi.html.vue"]]),f=JSON.parse('{"path":"/zh/guide/HTTPApi.html","title":"Model HTTP API","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Global Query Parameters","slug":"global-query-parameters","link":"#global-query-parameters","children":[{"level":3,"title":"Filtering","slug":"filtering","link":"#filtering","children":[]}]},{"level":2,"title":"Creating an Item","slug":"creating-an-item","link":"#creating-an-item","children":[]},{"level":2,"title":"Reading an Item or Items","slug":"reading-an-item-or-items","link":"#reading-an-item-or-items","children":[{"level":3,"title":"Read One","slug":"read-one","link":"#read-one","children":[]},{"level":3,"title":"Read List","slug":"read-list","link":"#read-list","children":[]}]},{"level":2,"title":"Updating Items","slug":"updating-items","link":"#updating-items","children":[]},{"level":2,"title":"Deleting Items","slug":"deleting-items","link":"#deleting-items","children":[]}],"git":{"updatedTime":1728307129000,"contributors":[{"name":"douyachan","email":"caohaozhe@163.com","commits":1}]},"filePathRelative":"zh/guide/HTTPApi.md"}');export{h as comp,f as data};
